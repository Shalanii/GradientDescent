data_x = [0,1,2,3,4,5,6,7,8,9,10];data_y = [100,300,500,700,900,1100,1300,1500,1700,1900,2100];batch_size = 4;N = 3;c_i = rand;m_i = (data_y(2)-data_y(1))/(data_x(2)-data_x(1));eata = 0.01;c = [];m = [];rss = [];i=0;stop = 0;count = 1;ideal_c = c_i;ideal_m = m_i;ind = 1;while(stop==0)  count = count+1;    if ind+batch_size>size(data_x,2)    batch_size = size(data_x,2)-ind;  endif  
  der_c = find_derivative_of_rss_to_c_mini_batch(data_y,data_x,m_i,c_i,ind,batch_size);  der_m = find_derivative_of_rss_to_m_mini_batch(data_y,data_x,m_i,c_i,ind,batch_size);  disp(der_c);  disp(der_m);  %if (count>4 && abs(der_c)>30) || (count>4 && abs(der_m)>30) || abs(der_m)<0.01 || abs(der_m)<0.01    % if count>15    %  stop = 1;    %endif
    %continue;  %endif    fprintf("step_c = %d and step_m = %d",der_c,der_m);  if count>40 | (abs(der_c)*eata<0.1 && count>0.05) | (abs(der_m)*eata<0.05 && count>3)    stop=1;    fprintf("Terminated");    ideal_c = c_i;    ideal_m = m_i;    fprintf("Optimal m is : %d\nOptimal c is : %d\n",ideal_m,ideal_c);  endif    c_i = c_i - (eata*der_c);  m_i = m_i - (eata*der_m);  c(end+1) = c_i;  m(end+1) = m_i;  new_err = find_err(data_y,m_i,data_x,c_i);  disp("ERR ");  disp(new_err);    i++;   ind = ind+batch_size;end[M C] = meshgrid(min(m):max(m)+0.1,min(c):max(c)+0.1);Z = find_rss4(data_y,m,data_x,c);minIntensityValue = min(Z(:));disp(minIntensityValue);contour(m,c,Z);hold on[~, minIdx] = min(Z(:)); [row,col] = ind2sub(size(Z),minIdx); xMin = m(col); yMin = c(row); disp(xMin);disp(yMin);hold on plot(xMin, yMin, 'rx');plot(m,c,Z,'ro');fprintf("Optimal m is : %d\nOptimal c is : %d\n",xMin,yMin);